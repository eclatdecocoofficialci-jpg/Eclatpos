<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Produits | √âclat de Coco POS</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <!-- üíó Navigation -->
  <nav>
    <h2>√âclat de Coco POS</h2>
    <div class="nav-buttons">
      <a href="index.html">POS</a>
      <a href="dashboard.html">Dashboard</a>
      <a href="sales.html">Sales Invoices</a>
      <a href="products.html" class="active">Products</a>
      <a href="inventory.html">Inventory</a>
      <a href="expenses.html">Expenses</a>
      <a href="reports.html">Reports</a>
    </div>
  </nav>

  <!-- üíÖ Main Layout -->
  <div class="product-layout">
    
    <!-- üå∏ Left Form -->
    <div class="add-product">
      <h3>Ajouter un Produit</h3>

      <label>Code Produit</label>
      <input type="text" id="code" placeholder="Ex: P001">

      <label>Nom du Produit</label>
      <input type="text" id="name" placeholder="Ex: Savon Rose Vanille">

      <label>Cat√©gorie</label>
      <input type="text" id="category" placeholder="Ex: Savons">

      <label>Quantit√©</label>
      <input type="number" id="quantity" placeholder="Ex: 10">

      <label>Prix (FCFA)</label>
      <input type="number" id="price" placeholder="Ex: 2500">

      <label>Co√ªt (FCFA)</label>
      <input type="number" id="cost" placeholder="Ex: 1500">

      <label>Code-barres</label>
      <div class="barcode-row">
        <input type="text" id="barcode" placeholder="Ex: 123456789">
        <button onclick="generateBarcode()">üéüÔ∏è</button>
      </div>

      <button class="add-btn" onclick="addProduct()">‚ûï Ajouter Produit</button>
    </div>

    <!-- üßæ Right Table -->
    <div class="product-table">
      <h3>Liste des Produits</h3>
      <table id="product-table">
        <thead>
          <tr>
            <th>Code</th>
            <th>Nom</th>
            <th>Cat√©gorie</th>
            <th>Quantit√©</th>
            <th>Prix</th>
            <th>Co√ªt</th>
            <th>Barcode</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="product-table-body">
          <tr><td colspan="8">Aucun produit ajout√©</td></tr>
        </tbody>
      </table>
    </div>

  </div>

  <!-- üåº Script -->
  <script>
    const products = JSON.parse(localStorage.getItem('products')) || [];
    const tableBody = document.getElementById('product-table-body');

    // üßÅ Display products
    function refreshTable() {
      if (products.length === 0) {
        tableBody.innerHTML = '<tr><td colspan="8">Aucun produit ajout√©</td></tr>';
        return;
      }
      tableBody.innerHTML = '';
      products.forEach((p, index) => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${p.code || '-'}</td>
          <td>${p.name || '-'}</td>
          <td>${p.category || '-'}</td>
          <td>${p.quantity || 0}</td>
          <td>${p.price?.toLocaleString() || 0}</td>
          <td>${p.cost?.toLocaleString() || 0}</td>
          <td>${p.barcode || '-'}</td>
          <td>
            <button class="edit-btn" onclick="editProduct(${index})">‚úèÔ∏è</button>
            <button class="delete-btn" onclick="deleteProduct(${index})">üóëÔ∏è</button>
          </td>`;
        tableBody.appendChild(tr);
      });
    }

    // ‚ûï Add product
    function addProduct() {
      const code = document.getElementById('code').value.trim();
      const name = document.getElementById('name').value.trim();
      const category = document.getElementById('category').value.trim();
      const quantity = parseInt(document.getElementById('quantity').value) || 0;
      const price = parseFloat(document.getElementById('price').value) || 0;
      const cost = parseFloat(document.getElementById('cost').value) || 0;
      const barcode = document.getElementById('barcode').value.trim();

      if (!name) {
        alert('Veuillez entrer un nom de produit.');
        return;
      }

      products.push({ code, name, category, quantity, price, cost, barcode });
      localStorage.setItem('products', JSON.stringify(products));

      // reset form
      document.querySelectorAll('.add-product input').forEach(i => i.value = '');
      refreshTable();
    }

    // ‚úèÔ∏è Edit product
    function editProduct(index) {
      const p = products[index];
      const newName = prompt('Modifier le nom du produit :', p.name);
      if (newName !== null && newName.trim() !== '') {
        products[index].name = newName.trim();
        localStorage.setItem('products', JSON.stringify(products));
        refreshTable();
      }
    }

    // üóëÔ∏è Delete product
    function deleteProduct(index) {
      if (confirm('Supprimer ce produit ?')) {
        products.splice(index, 1);
        localStorage.setItem('products', JSON.stringify(products));
        refreshTable();
      }
    }

    // üéüÔ∏è Auto-generate barcode
    function generateBarcode() {
      const randomCode = Math.floor(100000000 + Math.random() * 900000000);
      document.getElementById('barcode').value = randomCode;
    }

    // Load table on start
    refreshTable();
  </script>
</body>
</html>
